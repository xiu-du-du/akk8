# http协议
### 1.服务器渲染：在服务器上直接把数据和html整合在一起，统一返回给浏览器
### 2.客户端渲染：第一次请求返回一个heml框架，第二次请求拿到html数据。
### 区别：服务器渲染在页面源代码中能看到数据，客户端渲染在源代码中看不到数据
### 解决方法：使用浏览器抓包工具寻找抓取数据的url

### 请求：
#### 请求行 --> 请求方式GET、POST  请求url地址、协议
`General:`
```
 Request URL: https://movie.douban.com/j/chart/top_list?type=24&interval_id=100%3A90&action=&start=0&limit=20
 Request Method: GET
 Status Code: 200 OK
```
##### 请求方式：
1. GET：显示提交
2. POSt：隐式提交

#### 请求头 --> 放一些服务器要使用的附加信息
`Request Headers:`
```
User-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36
```
##### 请求头常见的一些重要内容
- **user-Agent**:请求载体的身份标识(用啥发送的请求)
- Referer：防盗链(这次请求是从哪个页面来的？反爬用到)
- cookie：本地字符串数据信息(用户登录信息，反爬的token)

#### 请求体 --> 一般放一些请求参数.比如：周杰伦



### 响应：
#### 状态行 --> 协议 状态码 例如：200,302,404等
#### 响应头 --> 放一些客户端要使用的一些附加信息
`Response Headers:`
```
X-Content-Type-Options: nosniff
X-DAE-App: movie
X-DAE-Instance: default
X-Douban-Mobileapp: 0
X-Xss-Protection: 1; mode=block
```
##### 响应头常见的一些重要内容：
- cookie:本地字符串数据信息(用户登录信息，反爬的token)
- 各种神奇的莫名其妙的字符串(这个需要经验，一般都是token字样，防止各种攻击和反爬)

#### 响应体 --> 服务器返回的真正客户端要用的内容(html、json)等


# requests 模块 入门学习
### 安装requests模块
`用清华源下载:
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple requests`
````python
import requests    # 引入requests模块
query = input('输入要搜索的关键词：')
url = f'https://www.sogou.com/web?query={query}'
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36'}    # 使用请求头伪装
resp = requests.get(url, headers=headers)  # 请求连接
print(resp)   # 返回状态码200
print(resp.text)  # 取返回文本
# 访问完后记得resp.close()关闭，如果不关闭会堵死
resp.close() #关闭resp 
````

### 百度翻译
#### 检查F12，打开filter，输入dog 找到sug的数据，查看请求url为POST请求，POST请求一般都有`Form Data`，查看里面的参数
````python
import requests
url = 'https://fanyi.baidu.com/sug'
s=input('请输入要翻译的英文单词：')
data = {
    'kw': s
}
# 发送post请求，发送的数据必须放在字典中，通过data参数进行发送
resp = requests.post(url, data=data)
print(resp)
print(resp.json())   # 将服务器返回的内容直接处理成json()  => dict字典
# 访问完后记得resp.close()关闭，如果不关闭会堵死
resp.close() #关闭resp 
````

### 豆瓣排行榜
#### 检查F12，打开filter，`xhr: ajax请求`，`url链接中找问号(?)，问号之前是链接，问号之后是参数`，查看请求url为POST请求，POST请求一般都有`Query String Parameters`，查看里面的参数
#### 如果发送的get请求很长，可以用第二种方式封装get的请求参数
````python
import requests
url='https://movie.douban.com/j/chart/top_list'
# 重新封装参数
param={
    'type': '24',
    'interval_id': '100:90',
    'action':'',
    'start': 0,
    'limit': 20,
}
# 获取不到内容，就使用请求头进行伪装后再爬取
headers={
'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/93.0.4577.63 Safari/537.36'
}
resp=requests.get(url,params=param,headers=headers)
print(resp)
print(resp.url)
print(resp.json())
# 访问完后记得resp.close()关闭，如果不关闭会堵死
resp.close() #关闭resp 
````
